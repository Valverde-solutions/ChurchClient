@page "/"

<PageTitle>Início</PageTitle>

<MudStack Spacing="3">
    <div class="hero-row">
        <div>
            <MudText Typo="Typo.h5" Class="fw-700">Painel da plataforma</MudText>
            <MudText Typo="Typo.body2" Class="text-muted">Visão rápida das igrejas, unidades e usuários.</MudText>
        </div>
        <MudStack Row="true" Spacing="1" AlignItems="AlignItems.Center">
            <MudButton Variant="Variant.Filled" Color="Color.Primary" StartIcon="@Icons.Material.Filled.AddBusiness">
                Nova igreja
            </MudButton>
            <MudButton Variant="Variant.Outlined" Color="Color.Secondary" StartIcon="@Icons.Material.Filled.GroupAdd">
                Convidar gestor
            </MudButton>
        </MudStack>
    </div>

    <MudGrid Class="stat-grid">
        @foreach (var card in _metricCards)
        {
            <MudItem xs="12" md="6" lg="3">
                <MudPaper Class="stat-card" Elevation="0">
                    <MudStack Spacing="1">
                        <MudStack Row="true" Spacing="1" AlignItems="AlignItems.Center">
                            <MudAvatar Color="Color.Primary" Class="icon-pill" Icon="@card.Icon" Size="Size.Medium" />
                            <MudText Typo="Typo.overline">@card.Title</MudText>
                        </MudStack>
                        <MudText Typo="Typo.h5">@card.Value</MudText>
                        <MudText Typo="Typo.caption" Class="text-muted">@card.Caption</MudText>
                    </MudStack>
                </MudPaper>
            </MudItem>
        }
    </MudGrid>

    <MudGrid Class="section-grid">
        <MudItem xs="12" lg="8">
            <MudPaper Class="panel-card" Elevation="0">
                <div class="panel-header">
                    <MudText Typo="Typo.h6">Unidades por tipo</MudText>
                    <MudChip T="string" Color="Color.Primary" Variant="Variant.Outlined" Class="filter-chip" Selected="true">Últimos 30 dias</MudChip>
                </div>
                <MudChart ChartType="ChartType.Bar"
                          Labels="@_chartLabels"
                          Datasets="@_chartData"
                          Class="revenue-chart" />
            </MudPaper>
        </MudItem>

        <MudItem xs="12" lg="4">
            <MudPaper Class="panel-card" Elevation="0">
                <div class="panel-header">
                    <MudText Typo="Typo.h6">Atalhos rápidos</MudText>
                </div>
                <MudList T="string" Dense="true">
                    <MudListItem>
                        <MudListItemIcon>
                            <MudIcon Icon="@Icons.Material.Filled.DomainAdd" Color="Color.Primary" />
                        </MudListItemIcon>
                        <MudListItemText>Registrar nova igreja</MudListItemText>
                    </MudListItem>
                    <MudListItem>
                        <MudListItemIcon>
                            <MudIcon Icon="@Icons.Material.Filled.AccountTree" Color="Color.Primary" />
                        </MudListItemIcon>
                        <MudListItemText>Criar unidade filha</MudListItemText>
                    </MudListItem>
                    <MudListItem>
                        <MudListItemIcon>
                            <MudIcon Icon="@Icons.Material.Filled.GroupWork" Color="Color.Primary" />
                        </MudListItemIcon>
                        <MudListItemText>Gerenciar gestores e papéis</MudListItemText>
                    </MudListItem>
                </MudList>
            </MudPaper>
        </MudItem>
    </MudGrid>
</MudStack>

@code {
    private readonly IReadOnlyList<MetricCard> _metricCards = new List<MetricCard>
    {
        new("Igrejas (tenants)", "12", "Organizações ativas", Icons.Material.Filled.Apartment),
        new("Unidades totais", "84", "Inclui sedes e congregações", Icons.Material.Filled.AccountTree),
        new("Gestores", "47", "Usuários com papéis administrativos", Icons.Material.Filled.Badge),
        new("Membros", "1.2k", "Cadastros de pessoas", Icons.Material.Filled.Groups)
    };

    private readonly string[] _chartLabels = { "Regional", "Sede", "Congregação", "Ponto" };

    private readonly ChartSeries[] _chartData =
    {
        new() { Name = "Unidades", Data = new double[] { 4, 12, 56, 12 } }
    };

    private record MetricCard(string Title, string Value, string Caption, string Icon);
}
